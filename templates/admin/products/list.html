{% extends "admin/admin_base.html" %}

{% block title %}
Products | Admin
{% endblock %}

{% block content %}

<style>
.product-page {
    padding: 24px;
}

.page-header {
    margin-bottom: 20px;
}

.page-header h1 {
    font-size: 26px;
    font-weight: 600;
    margin-bottom: 4px;
}

.page-header p {
    color: #6c757d;
    font-size: 14px;
}

.product-card {
    background: #ffffff;
    border-radius: 10px;
    padding: 0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    overflow: hidden;
}

.product-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

.product-table thead {
    background: #1f2933;
}

.product-table th {
    color: #ffffff;
    font-weight: 500;
    padding: 14px 16px;
    font-size: 14px;
    text-align: left;
    border-right: 1px solid rgba(255,255,255,0.15);
}

.product-table th:last-child {
    border-right: none;
}

.product-table td {
    padding: 14px 16px;
    font-size: 14px;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;
    vertical-align: middle;
}

.product-table td:last-child {
    border-right: none;
}

.product-table tbody tr:hover {
    background-color: #f9fafb;
}

.status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
}

.status-active {
    background: #e6f4ea;
    color: #137333;
}

.status-inactive {
    background: #fdecea;
    color: #b42318;
}

.empty-row {
    text-align: center;
    color: #6c757d;
    padding: 24px;
    font-size: 14px;
}
</style>

<div class="product-page">

    <div class="page-header">
        <h1>Product Catalogue</h1>
        <p>Manage and review all products available on the platform</p>
    </div>

    <div class="product-card">

        <table class="product-table">
            <thead>
                <tr>
                    <th style="width:70px;">ID</th>
                    <th style="width:90px;">Image</th>
                    <th>Name</th>
                    <th style="width:160px;">SKU</th>
                    <th style="width:140px;">Price</th>
                    <th style="width:140px;">Status</th>
                    <th style="width:180px;">Created At</th>
                </tr>
            </thead>

            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.id }}</td>

                    <td>
                        {% if product.image_list and product.image_list|length > 0 %}
    <img
        src="{{ product.image_list[0] }}"
        alt="Product Image"
        style="
            width:44px;
            height:44px;
            object-fit:cover;
            border-radius:6px;
            border:1px solid #e5e7eb;
        "
    >
{% else %}

                            <div style="
                                width:44px;
                                height:44px;
                                background:#f3f4f6;
                                border-radius:6px;
                                display:flex;
                                align-items:center;
                                justify-content:center;
                                font-size:11px;
                                color:#9ca3af;
                            ">
                                N/A
                            </div>
                        {% endif %}
                    </td>

                    <td>{{ product.name }}</td>
                    <td>{{ product.sku }}</td>
                    <td>₹ {{ "%.2f"|format(product.price) }}</td>
                    <td>
                        {% if product.status == "ACTIVE" %}
                            <span class="status-badge status-active">ACTIVE</span>
                        {% else %}
                            <span class="status-badge status-inactive">INACTIVE</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if product.created_at %}
                            {{ product.created_at.strftime("%d %b %Y, %H:%M") }}
                        {% else %}
                            —
                        {% endif %}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7" class="empty-row">
                        No products found
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

</div>

{% endblock %}
